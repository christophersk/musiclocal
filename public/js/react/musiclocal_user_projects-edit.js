"use strict";var ProjectEditContainer=React.createClass({displayName:"ProjectEditContainer",getInitialState:function getInitialState(){return {"backgroundimages_project":{"section_id":'1',"backgroundimage_filename":'asdfsffa'}};},componentDidMount:function componentDidMount(){ReactDOM.unmountComponentAtNode(document.getElementById('content-menu'));$("#projectsbutton").attr({"class":"active"});var project_id=this.props.data.project_id;$.ajax({type:"GET",url:"/user/projects/ajax/get/edit_project_icon_media_get",data:{"project_id":project_id,"_token":$_token},error:function error(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('Your current project could not be loaded. Please try again.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(response){var parsedresponse=JSON.parse(response);console.log(parsedresponse);console.log(parsedresponse.backgroundimages_project);this.setState({backgroundimages_project:parsedresponse.backgroundimages_project}); //ReactDOM.render(<ProjectSectionButtonList backgroundimages_project={parsedresponse.backgroundimages_project} />, document.getElementById('section-buttons'));
}).bind(this)});},renderSectionButtonList:function renderSectionButtonList(){ReactDOM.render(React.createElement(ProjectSectionButtonList,{backgroundimages_project:this.state.backgroundimages_project}),document.getElementById('section-buttons'));},handleClick:function handleClick($e){ReactDOM.unmountComponentAtNode(document.getElementById('manageprojectcontent'));if($e.target.id == 'add-about'){ReactDOM.render(React.createElement(AboutContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-user'){ReactDOM.render(React.createElement(UserContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-show'){ReactDOM.render(React.createElement(ShowsProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-banner'){ReactDOM.render(React.createElement(BannerProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-photoalbum'){ReactDOM.render(React.createElement(PhotoalbumProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-video'){ReactDOM.render(React.createElement(VideoProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-audio'){ReactDOM.render(React.createElement(AudioProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-social'){ReactDOM.render(React.createElement(SocialAddContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-contact'){ReactDOM.render(React.createElement(ContactProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-listing'){ReactDOM.render(React.createElement(BookinglistingProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}},handleProjectDelete:function handleProjectDelete(childdata){ /*
            Re-loads project list from server after delete instead of simply adjusting state client-side. This code is inefficient.
        */var projectid=childdata;var r=confirm("Are you sure you want to delete this project? WARNING: this action cannot be undone.");if(r == true){$.ajax({type:"POST",url:"/user/projects/delete", //dataType: "text"
data:{"project_id":projectid,_token:$_token},error:function error(){$('.photohashasnotbeenadded').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:function success(response){$('.photohashasnotbeenadded').finish().hide(0).removeClass('alert-danger','alert-info').html('Success').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);ReactDOM.unmountComponentAtNode(document.getElementById('content-modal'));ReactDOM.unmountComponentAtNode(document.getElementById('content-menu'));ReactDOM.unmountComponentAtNode(document.getElementById('content-main'));ReactDOM.render(React.createElement(ProjectsMenu,null),document.getElementById('content-menu'));}});}},render:function render(){return React.createElement("div",null,React.createElement(ProjectIsActiveEditHeader,{data:this.props.data,handleProjectDelete:this.handleProjectDelete}),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{id:"section-buttons"}),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-about",onClick:this.handleClick},"About")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-user",onClick:this.handleClick},"Users")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-show",onClick:this.handleClick},"Shows")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-banner",onClick:this.handleClick},"Banners")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-photoalbum",onClick:this.handleClick},"Photo Albums")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-video",onClick:this.handleClick},"Video")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-audio",onClick:this.handleClick},"Audio")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-social",onClick:this.handleClick},"Social Media")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-contact",onClick:this.handleClick},"Contact Info")),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("a",{className:"btn btn-default btn-block",id:"add-listing",onClick:this.handleClick},"Listings"))),React.createElement("div",{id:"manageprojectcontent"}));}});var ProjectSectionButtonList=React.createClass({displayName:"ProjectSectionButtonList",render:function render(){var projectsectionbuttons=this.props.backgroundimages_project.map((function(projectsectionbutton){var keystring='section_button-' + projectsectionbutton.section_id;return React.createElement(ProjectSectionButton,{section_id:projectsectionbutton.section_id,backgroundimage_filename:projectsectionbutton.backgroundimageimage_filename,key:keystring});}).bind(this));return React.createElement("div",null,projectsectionbuttons);}});var ProjectSectionButton=React.createClass({displayName:"ProjectSectionButton",handleClick:function handleClick($e){ReactDOM.unmountComponentAtNode(document.getElementById('manageprojectcontent'));if($e.target.id == '1'){ReactDOM.render(React.createElement(AboutContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-user'){ReactDOM.render(React.createElement(UserContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '2'){ReactDOM.render(React.createElement(ShowsProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-banner'){ReactDOM.render(React.createElement(BannerProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '5'){ReactDOM.render(React.createElement(PhotoalbumProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '3'){ReactDOM.render(React.createElement(VideoProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '4'){ReactDOM.render(React.createElement(AudioProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '7'){ReactDOM.render(React.createElement(SocialAddContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == '6'){ReactDOM.render(React.createElement(ContactProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}else if($e.target.id == 'add-listing'){ReactDOM.render(React.createElement(BookinglistingProjectContainer,{data:this.props.data}),document.getElementById('manageprojectcontent'));}},render:function render(){if(section_id = 1){var section_name='About';}if(section_id = 2){var section_name='Tour';}if(section_id = 3){var section_name='Video';}if(section_id = 4){var section_name='Audio';}if(section_id = 5){var section_name='Images';}if(section_id = 6){var section_name='Contact';}if(section_id = 7){var section_name='Social';}var srcstring='//d1y0bevpkkhybk.cloudfront.net/bsm/' + backgroundimage_filename + '.jpg';return React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("img",{className:"img img-responsive",src:srcstring}),React.createElement("a",{className:"btn btn-default btn-block"},section_name));}});var ProjectIsActiveEditHeader=React.createClass({displayName:"ProjectIsActiveEditHeader",getInitialState:function getInitialState(){return {project_active:{isactive:false,activatebutton_text:'',projectviewbutton:''}};},componentDidMount:function componentDidMount(){var projectid=this.props.data.project_id;$.ajax({type:"GET",url:"/user/project/ajax/active_status",data:{"project_id":projectid},error:(function(){this.setState({project_active:{isactive:null,activatebutton_text:'',projectviewbutton:'Could not get project status from server.'}});$('.photohashasnotbeenadded').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error. Please reload the page.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this),success:(function(response){if(response == 1){this.setState({project_active:{isactive:true,activatebutton_text:'Deactivate',projectviewbutton:'View ' + this.props.data.project_name}});}if(response == 0){this.setState({project_active:{isactive:false,activatebutton_text:'Activate',projectviewbutton:'[Deactivated]]'}});}}).bind(this)});},handleProjectActiveToggle:function handleProjectActiveToggle(){var isactive=this.state.project_active.isactive;var projectid=this.props.data.project_id;if(isactive == false){$.ajax({type:"POST",url:"/user/projects/activate",data:{"project_id":projectid,_token:$_token},error:function error(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error communicating with the server.<br/>Please try again.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(){this.setState({project_active:{isactive:true,activatebutton_text:'Deactivate',projectviewbutton:'View Project Page'}});$('.flash').finish().hide(0).removeClass('alert-danger','alert-info').html('Project has been activated.').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this)});}else if(isactive == true){$.ajax({type:"POST",url:"/user/projects/deactivate",data:{"project_id":projectid,_token:$_token},error:function error(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error communicating with the server.<br>Please try again.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(){this.setState({project_active:{isactive:false,activatebutton_text:'Activate',projectviewbutton:'[Deactivated]'}});$('.flash').finish().hide(0).removeClass('alert-danger','alert-info').html('Project has been deactivated.').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this)});}},viewProjectPage:function viewProjectPage(){var isactive=this.state.project_active.isactive;if(isactive == false){alert('You must activate your project to preview it.');}else if(isactive == true){var projectlinkstring='/' + this.props.data.project_url + '';window.open(projectlinkstring);}},handleProjectDelete:function handleProjectDelete(){var data=this.props.data.project_id;this.props.handleProjectDelete(data);},render:function render(){var isactive=this.state.project_active.isactive; //var activatebuttonstyle = {};
if(isactive == false){var projectviewbuttonclass='btn btn-block btn-default';var projectactivatebuttonclass='btn btn-block btn-success';}else {var projectviewbuttonclass='btn btn-block btn-success';var projectactivatebuttonclass='btn btn-block btn-warning';}var backbutton={paddingLeft:0,paddingRight:0};var rightbutton={paddingLeft:0};var button={margin:0};return React.createElement("div",{className:"row nopadding"},React.createElement("div",{className:"col-xs-4 col-sm-1",style:backbutton},React.createElement("a",{className:"btn btn-primary btn-block",style:button},"Back")),React.createElement("div",{className:"col-xs-8 col-sm-2",style:rightbutton},React.createElement("a",{className:projectviewbuttonclass,style:button,onClick:this.viewProjectPage},this.state.project_active.projectviewbutton),React.createElement("a",{className:projectactivatebuttonclass,style:button,onClick:this.handleProjectActiveToggle},this.state.project_active.activatebutton_text),React.createElement("a",{className:"btn btn-danger btn-block",style:button,onClick:this.handleProjectDelete},"Delete Project")),React.createElement("div",{className:"clearfix"}));}});var ProjectsectionToggle=React.createClass({displayName:"ProjectsectionToggle",getInitialState:function getInitialState(){return {projectsection_toggle_data:{isactive:this.props.projectsection_toggle_data.isactive,activatebutton_text:this.props.projectsection_toggle_data.activatebutton_text}};},componentDidMount:function componentDidMount(){ //by default, get active state from parent to conserve get requests.
//if isactive data is unavailable, get from server using ajax.
if(this.state.projectsection_toggle_data.isactive == null){var projectid=this.props.project_id;var projectsection_id=this.props.projectsection_toggle_data.projectsection_id;$.ajax({type:"GET",url:"/user/project/projectsection/active_status",data:{"project_id":projectid,"projectsection_id":projectsection_id,_token:$_token},error:(function(){this.setState({projectsection_toggle_data:{isactive:null,activatebutton_text:'Could not retrieve status.'}});$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error. Please reload the page.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this),success:(function(response){if(response == 1){this.setState({projectsection_toggle_data:{isactive:true,activatebutton_text:'Deactivate'}});}if(response == 0){this.setState({projectsection_toggle_data:{isactive:false,activatebutton_text:'Activate'}});}}).bind(this)});}},handleToggle:function handleToggle(){var isactive=this.state.projectsection_toggle_data.isactive;var projectid=this.props.project_id;var projectsection_id=this.props.projectsection_toggle_data.projectsection_id;if(isactive == false){$.ajax({type:"POST",url:"/user/project/projectsection/activate",data:{"project_id":projectid,"projectsection_id":projectsection_id,_token:$_token},error:function error(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error communicating with the server.<br/>Please try again.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(){this.setState({projectsection_toggle_data:{isactive:true,activatebutton_text:'(Active - click to deactivate)'}});$('.flash').finish().hide(0).removeClass('alert-danger','alert-info').html('Project has been activated.').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this)});}else if(isactive == true){$.ajax({type:"POST",url:"/user/project/projectsection/deactivate",data:{"project_id":projectid,"projectsection_id":projectsection_id,_token:$_token},error:function error(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error communicating with the server.<br>Please try again.').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(){this.setState({projectsection_toggle_data:{isactive:false,activatebutton_text:'(Inactive - click to activate)'}});$('.flash').finish().hide(0).removeClass('alert-danger','alert-info').html('Project has been deactivated.').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);}).bind(this)});}},render:function render(){var isactive=this.state.projectsection_toggle_data.isactive;if(isactive == null){var activatebuttonstyle={paddingLeft:10,marginRight:10}; //, color:'yellow'
//var projectviewbutton = {paddingLeft:10};//color:'#333333'
//var projectviewbuttonclass = 'btn btn-default';
var projectactivatebuttonclass='btn btn-default';}if(isactive == false){var activatebuttonstyle={paddingLeft:10,marginRight:10}; //, color:'yellow'
//var projectviewbutton = {paddingLeft:10};//color:'#333333'
//var projectviewbuttonclass = 'btn btn-default';
var projectactivatebuttonclass='btn btn-warning';}else {var activatebuttonstyle={paddingLeft:10,marginRight:10}; //, color:'green'
//var projectviewbutton = {paddingLeft:10};
//var projectviewbuttonclass = 'btn btn-info';
var projectactivatebuttonclass='btn btn-success';}return React.createElement("div",null,React.createElement("a",{className:projectactivatebuttonclass,style:activatebuttonstyle,onClick:this.handleToggle},this.state.projectsection_toggle_data.activatebutton_text));}});