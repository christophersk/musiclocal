"use strict";var BannerHeadlineContainer=React.createClass({displayName:"BannerHeadlineContainer",getInitialState:function getInitialState(){return {data:[]};},componentDidMount:function componentDidMount(){$.ajax({type:"GET",url:"user/ajax/get/get_user_bannerheadlines_all",data:{},error:function error(){$('.photohashasnotbeenadded').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);},success:(function(response){$('.photohashasnotbeenadded').finish().hide(0).removeClass('alert-danger','alert-info').html('Success').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);var parsedresponse=JSON.parse(response);var uniqueresponse=parsedresponse.bannerheadlines;this.setState({data:uniqueresponse}); //renderreact(uniqueresponse, projectresponse);
}).bind(this)});},handleDeleteButton:function handleDeleteButton(childdata){console.log(childdata);var bannerheadlineid=childdata.bannerheadline_id;var tempstatedata=this.state.data;console.log('temp state data:');console.log(tempstatedata);var setstatefunction=(function(){var newdataarray=this.state.data;var elementPos=this.state.data.map(function(item){return item.bannerheadline_id;}).indexOf(bannerheadlineid);newdataarray.splice(elementPos,1);this.setState({data:newdataarray}); //this does not seem to work (state is set correctly w/ item removed but component does not re-render even with forceUpdate.
//hiding component instead
$('#headline-' + bannerheadlineid).hide();}).bind(this);var r=confirm("Are you sure you want to delete this headline? This will remove the headline from all MusicLocal projects. WARNING: this action cannot be undone.");if(r == true){setstatefunction();$.ajax({type:"POST",url:"user/ajax/post/delete_current_bannerheadline", //dataType: "text"
data:{"bannerheadline_id":bannerheadlineid,_token:$_token},error:(function(){$('.flash').finish().hide(0).removeClass('alert-success','alert-info').html('There was an error').addClass('alert-danger').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);this.setState({data:tempstatedata});$('#headline-' + bannerheadlineid).show();}).bind(this),success:(function(response){$('.flash').finish().hide(0).removeClass('alert-danger','alert-info').html('Success').addClass('alert-success').fadeIn(300).removeClass('hidden').delay(3000).fadeOut(300);ReactDOM.unmountComponentAtNode(document.getElementById('content-modal'));$('#content-main').show();}).bind(this)});}},render:function render(){var containerstyle={padding:0}; //
return React.createElement("div",{className:"container container-fixed",style:containerstyle,id:"headlines-manage-container"},React.createElement("div",null,React.createElement(BannerHeadlineList,{data:this.state.data,handleDeleteButton:this.handleDeleteButton})));}});var BannerHeadlineList=React.createClass({displayName:"BannerHeadlineList",handleDeleteButton:function handleDeleteButton(data){this.props.handleDeleteButton(data);},render:function render(){var bannerheadlines=this.props.data.map((function(bannerheadline){return React.createElement(CurrentBannerHeadline,{bannerheadline_title:bannerheadline.bannerheadline_title,bannerheadline_content:bannerheadline.bannerheadline_content,key:'headline-' + bannerheadline.bannerheadline_id,bannerheadline_id:bannerheadline.bannerheadline_id,handleDeleteButton:this.handleDeleteButton});}).bind(this));var imgcontstyle={};return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("div",{style:imgcontstyle},bannerheadlines)));}});var CurrentBannerHeadline=React.createClass({displayName:"CurrentBannerHeadline",getInitialState:function getInitialState(){return {showComponent:true};},componentDidMount:function componentDidMount(){},handleModalDeleteButton:function handleModalDeleteButton(data){this.props.handleDeleteButton(data);},handleDeleteButton:function handleDeleteButton(){this.props.handleDeleteButton({bannerheadline_id:this.props.bannerheadline_id,bannerheadline_title:this.props.bannerheadline_title,bannerheadline_content:this.props.bannerheadline_content});},onClick:function onClick(){alert('not allowed');return;ReactDOM.unmountComponentAtNode(document.getElementById('content-modal'));ReactDOM.render(React.createElement(BannerHeadlineModal,{bannerheadline_title:this.props.bannerheadline_title,bannerheadline_content:this.props.bannerheadline_content,bannerheadline_id:this.props.bannerheadline_id,key:'modal' + this.props.bannerheadline_id,handleDeleteButton:this.handleModalDeleteButton}),document.getElementById('content-modal'));$('#content-main').hide(); //$('#savecurrentbannerbutton').attr('href', '//d1y0bevpkkhybk.cloudfront.net/c/' + this.props.filename + '.jpg' );
},render:function render(){if(!this.state.showComponent){return null;}var photostyle={padding:'0.25%'};var name=this.props.filename; //console.log(name);
var srcstring='//d1y0bevpkkhybk.cloudfront.net/t/' + name + '.jpg';var btndivstyle={textAlign:'center'};var btnstyle={marginTop:8};var idstring='headline-' + this.props.bannerheadline_id;return  (//<img className="grid-item grid-item--width3" style={photostyle} onClick={this.onClick} src={this.props.link3} data-link0={this.props.link0} data-link1={this.props.link1} data-link2={this.props.link2} data-link4={this.props.link4} data-link5={this.props.link5} data-link6={this.props.link6} id={this.props.id} data-fromid={this.props.from_id} data-from_name={this.props.from_name} data-fb_created_time={this.props.fb_created_time}/>
React.createElement("div",{className:"row nopadding",id:idstring},React.createElement("div",{className:"col-sm-12"},React.createElement("h3",null,this.props.bannerheadline_title),React.createElement("p",null,this.props.bannerheadline_content)),React.createElement("div",{style:btndivstyle},React.createElement("button",{style:btnstyle,className:"btn btn-default btn-xs",onClick:this.handleDeleteButton},"Delete Headline"))));}});var BannerHeadlineModal=React.createClass({displayName:"BannerHeadlineModal",getInitialState:function getInitialState(){return {showComponent:true};},componentDidMount:function componentDidMount(){},handleClose:function handleClose(){ReactDOM.unmountComponentAtNode(document.getElementById('content-modal'));$('#content-main').show();},handleDeleteButton:function handleDeleteButton(){this.props.handleDeleteButton({bannerheadline_id:this.props.bannerheadline_id,bannerheadline_title:this.props.bannerheadline_title,bannerheadline_content:this.props.bannerheadline_content});},render:function render(){var spacerstyle={padding:10};var textdivstyle={display:'block',textAlign:'center'};return React.createElement("div",{className:"col-sm-12"},React.createElement("h3",null,this.props.bannerheadline_title),React.createElement("p",null,this.props.bannerheadline_content),React.createElement("span",{style:spacerstyle}),React.createElement("a",{id:"deletecurrentheadlinebutton",className:"btn btn-default",onClick:this.handleDeleteButton},"Delete Headline"),React.createElement("br",null),React.createElement("br",null),React.createElement("div",null,React.createElement("a",{id:"closebox",className:"btn btn-default",onClick:this.handleClose},"Close Headline")));}});